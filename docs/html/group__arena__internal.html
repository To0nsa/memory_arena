<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>memory_arena: Internal Implementation</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">memory_arena
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#groups">Modules</a> &#124;
<a href="#files">Files</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">Internal Implementation</div></div>
</div><!--header-->
<div class="contents">

<p>Base group for internal implementation details.  
<a href="#details">More...</a></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Collaboration diagram for Internal Implementation:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="group__arena__internal.png" border="0" usemap="#agroup____arena____internal" alt=""/></div>
<map name="agroup____arena____internal" id="agroup____arena____internal">
<area shape="rect" href="group__arena__alloc__internal.html" title="Internal helpers for memory allocation logic." alt="" coords="233,5,424,31"/>
<area shape="rect" href="group__arena__cleanup__internal.html" title="Internal helpers for teardown and memory release." alt="" coords="239,55,418,80"/>
<area shape="rect" href="group__arena__init__internal.html" title="Internal helpers for arena setup and configuration." alt="" coords="256,105,401,145"/>
<area shape="rect" title="Base group for internal implementation details." alt="" coords="5,141,185,167"/>
<area shape="rect" href="group__arena__resize__internal.html" title="Internal helpers for growing and shrinking memory buffers." alt="" coords="245,169,413,195"/>
<area shape="rect" href="group__arena__scratch__internal.html" title="Internal helpers and utilities for scratch arena pool management." alt="" coords="242,219,415,244"/>
<area shape="rect" href="group__arena__sub__internal.html" title="Internal helpers for configuring sub&#45;arenas." alt="" coords="253,268,404,293"/>
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="groups" name="groups"></a>
Modules</h2></td></tr>
<tr class="memitem:group__arena__init__internal" id="r_group__arena__init__internal"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__arena__init__internal.html">Arena Initialization Internals</a></td></tr>
<tr class="memdesc:group__arena__init__internal"><td class="mdescLeft">&#160;</td><td class="mdescRight">Internal helpers for arena setup and configuration. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__arena__cleanup__internal" id="r_group__arena__cleanup__internal"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__arena__cleanup__internal.html">Arena Cleanup Internals</a></td></tr>
<tr class="memdesc:group__arena__cleanup__internal"><td class="mdescLeft">&#160;</td><td class="mdescRight">Internal helpers for teardown and memory release. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__arena__alloc__internal" id="r_group__arena__alloc__internal"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__arena__alloc__internal.html">Arena Allocation Internals</a></td></tr>
<tr class="memdesc:group__arena__alloc__internal"><td class="mdescLeft">&#160;</td><td class="mdescRight">Internal helpers for memory allocation logic. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__arena__sub__internal" id="r_group__arena__sub__internal"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__arena__sub__internal.html">Sub-Arena Internals</a></td></tr>
<tr class="memdesc:group__arena__sub__internal"><td class="mdescLeft">&#160;</td><td class="mdescRight">Internal helpers for configuring sub-arenas. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__arena__resize__internal" id="r_group__arena__resize__internal"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__arena__resize__internal.html">Arena Resize Internals</a></td></tr>
<tr class="memdesc:group__arena__resize__internal"><td class="mdescLeft">&#160;</td><td class="mdescRight">Internal helpers for growing and shrinking memory buffers. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__arena__scratch__internal" id="r_group__arena__scratch__internal"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__arena__scratch__internal.html">Scratch Arena Internals</a></td></tr>
<tr class="memdesc:group__arena__scratch__internal"><td class="mdescLeft">&#160;</td><td class="mdescRight">Internal helpers and utilities for scratch arena pool management. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="files" name="files"></a>
Files</h2></td></tr>
<tr class="memitem:arena__internal_8c" id="r_arena__internal_8c"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="arena__internal_8c.html">arena_internal.c</a></td></tr>
<tr class="memdesc:arena__internal_8c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Internal utilities and metadata management for the Arena memory system. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:arena__internal_8h" id="r_arena__internal_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="arena__internal_8h.html">arena_internal.h</a></td></tr>
<tr class="memdesc:arena__internal_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">Internal utilities and helpers for arena memory management. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga2e09625e200e30dafcb85771b821a355" id="r_ga2e09625e200e30dafcb85771b821a355"><td class="memItemLeft" align="right" valign="top">static size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__arena__internal.html#ga2e09625e200e30dafcb85771b821a355">align_up</a> (size_t value, size_t alignment)</td></tr>
<tr class="memdesc:ga2e09625e200e30dafcb85771b821a355"><td class="mdescLeft">&#160;</td><td class="mdescRight">Align a value upwards to the nearest multiple of <code>alignment</code>.  <br /></td></tr>
<tr class="separator:ga2e09625e200e30dafcb85771b821a355"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6bcc9b8d8f8dcac0c269eccc0b8cf8d2" id="r_ga6bcc9b8d8f8dcac0c269eccc0b8cf8d2"><td class="memItemLeft" align="right" valign="top">static void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__arena__internal.html#ga6bcc9b8d8f8dcac0c269eccc0b8cf8d2">arena_alloc_buffer</a> (size_t size)</td></tr>
<tr class="memdesc:ga6bcc9b8d8f8dcac0c269eccc0b8cf8d2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocate a zero-initialized memory buffer for the arena.  <br /></td></tr>
<tr class="separator:ga6bcc9b8d8f8dcac0c269eccc0b8cf8d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf3f69ef616d39542b2f9d81f954998cd" id="r_gaf3f69ef616d39542b2f9d81f954998cd"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="structt__arena.html">t_arena</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__arena__internal.html#gaf3f69ef616d39542b2f9d81f954998cd">arena_alloc_struct</a> (void)</td></tr>
<tr class="memdesc:gaf3f69ef616d39542b2f9d81f954998cd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocate and zero-initialize a new arena struct.  <br /></td></tr>
<tr class="separator:gaf3f69ef616d39542b2f9d81f954998cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2dcc4e3f99d12e69a37bac4cf5401b63" id="r_ga2dcc4e3f99d12e69a37bac4cf5401b63"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__arena__internal.html#ga2dcc4e3f99d12e69a37bac4cf5401b63">arena_finish_init</a> (<a class="el" href="structt__arena.html">t_arena</a> *arena, void *buffer, size_t size, bool allow_grow)</td></tr>
<tr class="memdesc:ga2dcc4e3f99d12e69a37bac4cf5401b63"><td class="mdescLeft">&#160;</td><td class="mdescRight">Finalize the initialization of an arena with a provided buffer.  <br /></td></tr>
<tr class="separator:ga2dcc4e3f99d12e69a37bac4cf5401b63"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9b703d033342ea54cf18d08eac74d5b1" id="r_ga9b703d033342ea54cf18d08eac74d5b1"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__arena__internal.html#ga9b703d033342ea54cf18d08eac74d5b1">arena_init_mutex</a> (<a class="el" href="structt__arena.html">t_arena</a> *arena)</td></tr>
<tr class="memdesc:ga9b703d033342ea54cf18d08eac74d5b1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the mutex used for thread-safe arena operations.  <br /></td></tr>
<tr class="separator:ga9b703d033342ea54cf18d08eac74d5b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga621d65813296246955027fa3f7f05838" id="r_ga621d65813296246955027fa3f7f05838"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__arena__internal.html#ga621d65813296246955027fa3f7f05838">arena_is_valid</a> (const <a class="el" href="structt__arena.html">t_arena</a> *arena)</td></tr>
<tr class="memdesc:ga621d65813296246955027fa3f7f05838"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check whether the given arena is in a valid, initialized state.  <br /></td></tr>
<tr class="separator:ga621d65813296246955027fa3f7f05838"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2d9a7cc2eb2dd849843b312892303c71" id="r_ga2d9a7cc2eb2dd849843b312892303c71"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__arena__internal.html#ga2d9a7cc2eb2dd849843b312892303c71">arena_log_and_teardown</a> (<a class="el" href="structt__arena.html">t_arena</a> **arena, const char *msg)</td></tr>
<tr class="memdesc:ga2d9a7cc2eb2dd849843b312892303c71"><td class="mdescLeft">&#160;</td><td class="mdescRight">Report an error, destroy the arena, and free its memory.  <br /></td></tr>
<tr class="separator:ga2d9a7cc2eb2dd849843b312892303c71"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga158ae1db776df1d113e7cddff4c9ca2f" id="r_ga158ae1db776df1d113e7cddff4c9ca2f"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__arena__internal.html#ga158ae1db776df1d113e7cddff4c9ca2f">arena_reset_metadata</a> (<a class="el" href="structt__arena.html">t_arena</a> *arena)</td></tr>
<tr class="memdesc:ga158ae1db776df1d113e7cddff4c9ca2f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reset all arena metadata fields to their default initial state.  <br /></td></tr>
<tr class="separator:ga158ae1db776df1d113e7cddff4c9ca2f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8e94425910ed0ce27fd21cda3937ad56" id="r_ga8e94425910ed0ce27fd21cda3937ad56"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__arena__internal.html#ga8e94425910ed0ce27fd21cda3937ad56">arena_set_allocated_buffer</a> (<a class="el" href="structt__arena.html">t_arena</a> *arena, size_t size)</td></tr>
<tr class="memdesc:ga8e94425910ed0ce27fd21cda3937ad56"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocate and assign a zero-initialized buffer to an arena.  <br /></td></tr>
<tr class="separator:ga8e94425910ed0ce27fd21cda3937ad56"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9460f83f6dae2993ccbd6a388944bf7c" id="r_ga9460f83f6dae2993ccbd6a388944bf7c"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__arena__internal.html#ga9460f83f6dae2993ccbd6a388944bf7c">arena_set_default_label</a> (<a class="el" href="structt__arena.html">t_arena</a> *arena, const char *fallback)</td></tr>
<tr class="memdesc:ga9460f83f6dae2993ccbd6a388944bf7c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set a fallback debug label if none is set.  <br /></td></tr>
<tr class="separator:ga9460f83f6dae2993ccbd6a388944bf7c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5f5cec8e7ef56c3bf1ec9336e54f1a48" id="r_ga5f5cec8e7ef56c3bf1ec9336e54f1a48"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__arena__internal.html#ga5f5cec8e7ef56c3bf1ec9336e54f1a48">arena_set_or_alloc_buffer</a> (<a class="el" href="structt__arena.html">t_arena</a> *arena, void *buffer, size_t size)</td></tr>
<tr class="memdesc:ga5f5cec8e7ef56c3bf1ec9336e54f1a48"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configure an arena's buffer by either assigning a user-provided region or allocating one internally.  <br /></td></tr>
<tr class="separator:ga5f5cec8e7ef56c3bf1ec9336e54f1a48"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1d3f6bfa8145e31ab67a0cf9bce5f222" id="r_ga1d3f6bfa8145e31ab67a0cf9bce5f222"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__arena__internal.html#ga1d3f6bfa8145e31ab67a0cf9bce5f222">arena_set_user_buffer</a> (<a class="el" href="structt__arena.html">t_arena</a> *arena, void *buffer, size_t size)</td></tr>
<tr class="memdesc:ga1d3f6bfa8145e31ab67a0cf9bce5f222"><td class="mdescLeft">&#160;</td><td class="mdescRight">Assign a user-provided buffer to an arena without taking ownership.  <br /></td></tr>
<tr class="separator:ga1d3f6bfa8145e31ab67a0cf9bce5f222"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga158f6a0623850d3dc681d9ecab1fe27f" id="r_ga158f6a0623850d3dc681d9ecab1fe27f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__arena__internal.html#ga158f6a0623850d3dc681d9ecab1fe27f">arena_stats_reset</a> (<a class="el" href="group__arena__stats.html#ga5c30fe6780dafbd7e5a8c3b86d25afba">t_arena_stats</a> *stats)</td></tr>
<tr class="memdesc:ga158f6a0623850d3dc681d9ecab1fe27f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reset all allocation statistics in an arena stats structure.  <br /></td></tr>
<tr class="separator:ga158f6a0623850d3dc681d9ecab1fe27f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa3a1838aa18111801b980c0b81e37813" id="r_gaa3a1838aa18111801b980c0b81e37813"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__arena__internal.html#gaa3a1838aa18111801b980c0b81e37813">arena_update_peak</a> (<a class="el" href="structt__arena.html">t_arena</a> *arena)</td></tr>
<tr class="memdesc:gaa3a1838aa18111801b980c0b81e37813"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update the arena’s peak memory usage if the current usage exceeds it.  <br /></td></tr>
<tr class="separator:gaa3a1838aa18111801b980c0b81e37813"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga268aa3f7256dbdf405391501fedbabd4" id="r_ga268aa3f7256dbdf405391501fedbabd4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__arena__internal.html#ga268aa3f7256dbdf405391501fedbabd4">arena_zero_metadata</a> (<a class="el" href="structt__arena.html">t_arena</a> *arena)</td></tr>
<tr class="memdesc:ga268aa3f7256dbdf405391501fedbabd4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Zero out and reset all debug/stats metadata associated with the arena.  <br /></td></tr>
<tr class="separator:ga268aa3f7256dbdf405391501fedbabd4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga627d4fdc46e225dccde0388ae40d04de" id="r_ga627d4fdc46e225dccde0388ae40d04de"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__arena__internal.html#ga627d4fdc46e225dccde0388ae40d04de">default_grow_cb</a> (size_t current_size, size_t requested_size)</td></tr>
<tr class="memdesc:ga627d4fdc46e225dccde0388ae40d04de"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default growth policy callback for arena resizing.  <br /></td></tr>
<tr class="separator:ga627d4fdc46e225dccde0388ae40d04de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga81c528fdada659878311546faf6db2f7" id="r_ga81c528fdada659878311546faf6db2f7"><td class="memItemLeft" align="right" valign="top">static size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__arena__internal.html#ga81c528fdada659878311546faf6db2f7">next_power_of_two</a> (size_t x)</td></tr>
<tr class="memdesc:ga81c528fdada659878311546faf6db2f7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the next power of two greater than or equal to <code>x</code>.  <br /></td></tr>
<tr class="separator:ga81c528fdada659878311546faf6db2f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga23b2d670602172508845e71559ac6a01" id="r_ga23b2d670602172508845e71559ac6a01"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__arena__internal.html#ga23b2d670602172508845e71559ac6a01">would_overflow_mul</a> (size_t a, size_t b, size_t *result)</td></tr>
<tr class="memdesc:ga23b2d670602172508845e71559ac6a01"><td class="mdescLeft">&#160;</td><td class="mdescRight">Perform a checked multiplication of two <code>size_t</code> values.  <br /></td></tr>
<tr class="separator:ga23b2d670602172508845e71559ac6a01"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Base group for internal implementation details. </p>
<p>This group collects all static inline functions, helpers, and low-level logic used internally by the arena system. These are not part of the public API and may change at any time. </p>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga2e09625e200e30dafcb85771b821a355" name="ga2e09625e200e30dafcb85771b821a355"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2e09625e200e30dafcb85771b821a355">&#9670;&#160;</a></span>align_up()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static size_t align_up </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>alignment</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="arena__math_8h.html">arena_math.h</a>&gt;</code></p>

<p>Align a value upwards to the nearest multiple of <code>alignment</code>. </p>
<p>Returns the smallest multiple of <code>alignment</code> that is greater than or equal to <code>value</code>. <code>alignment</code> must be a power of two.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">value</td><td>The value to align. </td></tr>
    <tr><td class="paramname">alignment</td><td>The alignment boundary (must be power of two).</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The aligned value.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>This function is commonly used for computing aligned memory offsets. </dd></dl>
<dl class="section examples"><dt>Examples</dt><dd><a class="el" href="_2home_2toonsa_2myProjects_2memoryArena_2srcs_2core_2allocation_2arena_alloc_8c-example.html#a20">/home/toonsa/myProjects/memoryArena/srcs/core/allocation/arena_alloc.c</a>.</dd>
</dl>
<div class="fragment"><div class="line"><span class="lineno">   53</span>    {</div>
<div class="line"><span class="lineno">   54</span>        <span class="keywordflow">return</span> (value + alignment - 1) &amp; ~(alignment - 1);</div>
<div class="line"><span class="lineno">   55</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="ga6bcc9b8d8f8dcac0c269eccc0b8cf8d2" name="ga6bcc9b8d8f8dcac0c269eccc0b8cf8d2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6bcc9b8d8f8dcac0c269eccc0b8cf8d2">&#9670;&#160;</a></span>arena_alloc_buffer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void * arena_alloc_buffer </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="arena__create_8c.html">arena_create.c</a>&gt;</code></p>

<p>Allocate a zero-initialized memory buffer for the arena. </p>
<p>This function wraps <code>calloc</code> to allocate a contiguous zeroed memory region of <code>size</code> bytes. It is used when the arena needs to allocate its own internal memory buffer (rather than relying on an external one provided by the user).</p>
<p>If allocation fails, the function reports the failure using <code>arena_report_error</code>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">size</td><td>The number of bytes to allocate. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A pointer to the allocated memory buffer, or <code>NULL</code> if allocation fails.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>The buffer must be freed manually if the initialization of the arena fails.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="arena__create_8c.html#ad623b3dfc5761c29d44f78c58821c932">arena_create</a> </dd>
<dd>
<a class="el" href="arena__create_8c.html#a245dff47ef4fe5693b657a42deecf988">arena_init</a> </dd></dl>
<dl class="section examples"><dt>Examples</dt><dd><a class="el" href="_2home_2toonsa_2myProjects_2memoryArena_2srcs_2core_2arena_create_8c-example.html#a8">/home/toonsa/myProjects/memoryArena/srcs/core/arena_create.c</a>.</dd>
</dl>
<div class="fragment"><div class="line"><span class="lineno">  493</span>{</div>
<div class="line"><span class="lineno">  494</span>    <span class="keywordtype">void</span>* buffer = calloc(1, size);</div>
<div class="line"><span class="lineno">  495</span>    <span class="keywordflow">if</span> (!buffer)</div>
<div class="line"><span class="lineno">  496</span>        <a class="code hl_function" href="group__arena__debug.html#gad19e051bc49dc6b6dcda0f31561e222d">arena_report_error</a>(NULL, <span class="stringliteral">&quot;arena_create failed: buffer allocation of %zu bytes failed&quot;</span>, size);</div>
<div class="line"><span class="lineno">  497</span>    <span class="keywordflow">return</span> buffer;</div>
<div class="line"><span class="lineno">  498</span>}</div>
<div class="ttc" id="agroup__arena__debug_html_gad19e051bc49dc6b6dcda0f31561e222d"><div class="ttname"><a href="group__arena__debug.html#gad19e051bc49dc6b6dcda0f31561e222d">arena_report_error</a></div><div class="ttdeci">void arena_report_error(t_arena *arena, const char *fmt,...)</div><div class="ttdoc">Report an error from an arena using its configured error callback.</div><div class="ttdef"><b>Definition</b> arena_debug.c:253</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="gaf3f69ef616d39542b2f9d81f954998cd" name="gaf3f69ef616d39542b2f9d81f954998cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf3f69ef616d39542b2f9d81f954998cd">&#9670;&#160;</a></span>arena_alloc_struct()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="structt__arena.html">t_arena</a> * arena_alloc_struct </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="arena__create_8c.html">arena_create.c</a>&gt;</code></p>

<p>Allocate and zero-initialize a new arena struct. </p>
<p>This internal helper allocates memory for a <code><a class="el" href="structt__arena.html" title="The main memory arena structure used for fast allocation.">t_arena</a></code> structure using <code>calloc</code>, which ensures all fields are zero-initialized. This guarantees a clean slate before any initialization logic is applied, helping avoid undefined behavior from stale data.</p>
<p>On failure, the function returns <code>NULL</code>. The calling function is responsible for handling the failure and cleaning up if needed.</p>
<p>This function does <b>not</b> allocate the memory buffer used for allocations— it only handles the control structure itself.</p>
<dl class="section return"><dt>Returns</dt><dd>Pointer to a newly allocated <code><a class="el" href="structt__arena.html" title="The main memory arena structure used for fast allocation.">t_arena</a></code>, or <code>NULL</code> on failure.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="arena__create_8c.html#ad623b3dfc5761c29d44f78c58821c932">arena_create</a> </dd></dl>
<dl class="section examples"><dt>Examples</dt><dd><a class="el" href="_2home_2toonsa_2myProjects_2memoryArena_2srcs_2core_2arena_create_8c-example.html#a6">/home/toonsa/myProjects/memoryArena/srcs/core/arena_create.c</a>.</dd>
</dl>
<div class="fragment"><div class="line"><span class="lineno">  427</span>{</div>
<div class="line"><span class="lineno">  428</span>    <span class="keywordflow">return</span> (<a class="code hl_struct" href="structt__arena.html">t_arena</a>*) calloc(1, <span class="keyword">sizeof</span>(<a class="code hl_struct" href="structt__arena.html">t_arena</a>));</div>
<div class="line"><span class="lineno">  429</span>}</div>
<div class="ttc" id="astructt__arena_html"><div class="ttname"><a href="structt__arena.html">t_arena</a></div><div class="ttdoc">The main memory arena structure used for fast allocation.</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga2dcc4e3f99d12e69a37bac4cf5401b63" name="ga2dcc4e3f99d12e69a37bac4cf5401b63"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2dcc4e3f99d12e69a37bac4cf5401b63">&#9670;&#160;</a></span>arena_finish_init()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool arena_finish_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structt__arena.html">t_arena</a> *&#160;</td>
          <td class="paramname"><em>arena</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>allow_grow</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="arena__create_8c.html">arena_create.c</a>&gt;</code></p>

<p>Finalize the initialization of an arena with a provided buffer. </p>
<p>This internal helper is used to complete the setup of an arena after a memory buffer has been successfully allocated.</p>
<p>The function performs the following:</p><ul>
<li>Resets the arena's internal state via <code>arena_reset_metadata</code>.</li>
<li>Sets the buffer, size, and ownership flag.</li>
<li>Initializes flags for growth and destruction status.</li>
<li>Initializes the mutex (if thread safety is enabled).</li>
<li>Generates a unique debug ID for the arena.</li>
</ul>
<p>If mutex initialization fails, the buffer is freed immediately to avoid memory leaks and the function returns <code>false</code>. Ownership of the arena structure itself remains with the caller.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">arena</td><td>Pointer to the arena being initialized. </td></tr>
    <tr><td class="paramname">buffer</td><td>Pre-allocated memory buffer for arena use. </td></tr>
    <tr><td class="paramname">size</td><td>Size of the memory buffer in bytes. </td></tr>
    <tr><td class="paramname">allow_grow</td><td>Whether the arena may grow dynamically if full.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>true</code> on success, <code>false</code> if mutex setup failed.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="arena__create_8c.html#ad623b3dfc5761c29d44f78c58821c932">arena_create</a> </dd>
<dd>
<a class="el" href="arena__create_8c.html#a245dff47ef4fe5693b657a42deecf988">arena_init</a> </dd></dl>
<dl class="section examples"><dt>Examples</dt><dd><a class="el" href="_2home_2toonsa_2myProjects_2memoryArena_2srcs_2core_2arena_create_8c-example.html#a11">/home/toonsa/myProjects/memoryArena/srcs/core/arena_create.c</a>.</dd>
</dl>
<div class="fragment"><div class="line"><span class="lineno">  641</span>{</div>
<div class="line"><span class="lineno">  642</span>    <a class="code hl_function" href="group__arena__internal.html#ga158ae1db776df1d113e7cddff4c9ca2f">arena_reset_metadata</a>(arena);</div>
<div class="line"><span class="lineno">  643</span>    arena-&gt;buffer = (uint8_t*) buffer;</div>
<div class="line"><span class="lineno">  644</span>    arena-&gt;size   = size;</div>
<div class="line"><span class="lineno">  645</span>    atomic_store_explicit(&amp;arena-&gt;owns_buffer, <span class="keyword">true</span>, memory_order_release);</div>
<div class="line"><span class="lineno">  646</span>    atomic_store_explicit(&amp;arena-&gt;can_grow, allow_grow, memory_order_release);</div>
<div class="line"><span class="lineno">  647</span>    atomic_store_explicit(&amp;arena-&gt;is_destroying, <span class="keyword">false</span>, memory_order_release);</div>
<div class="line"><span class="lineno">  648</span> </div>
<div class="line"><span class="lineno">  649</span>    <span class="keywordflow">if</span> (!<a class="code hl_function" href="group__arena__internal.html#ga9b703d033342ea54cf18d08eac74d5b1">arena_init_mutex</a>(arena))</div>
<div class="line"><span class="lineno">  650</span>    {</div>
<div class="line"><span class="lineno">  651</span>        free(buffer);</div>
<div class="line"><span class="lineno">  652</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  653</span>    }</div>
<div class="line"><span class="lineno">  654</span>    <a class="code hl_function" href="group__arena__debug.html#ga04a9de28f7c7ffe93039cce9927ac875">arena_generate_id</a>(arena);</div>
<div class="line"><span class="lineno">  655</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  656</span>}</div>
<div class="ttc" id="agroup__arena__debug_html_ga04a9de28f7c7ffe93039cce9927ac875"><div class="ttname"><a href="group__arena__debug.html#ga04a9de28f7c7ffe93039cce9927ac875">arena_generate_id</a></div><div class="ttdeci">void arena_generate_id(t_arena *arena)</div><div class="ttdoc">Generate a unique debug ID for an arena.</div><div class="ttdef"><b>Definition</b> arena_debug.c:102</div></div>
<div class="ttc" id="agroup__arena__internal_html_ga158ae1db776df1d113e7cddff4c9ca2f"><div class="ttname"><a href="group__arena__internal.html#ga158ae1db776df1d113e7cddff4c9ca2f">arena_reset_metadata</a></div><div class="ttdeci">static void arena_reset_metadata(t_arena *arena)</div><div class="ttdoc">Reset all arena metadata fields to their default initial state.</div><div class="ttdef"><b>Definition</b> arena_create.c:530</div></div>
<div class="ttc" id="agroup__arena__internal_html_ga9b703d033342ea54cf18d08eac74d5b1"><div class="ttname"><a href="group__arena__internal.html#ga9b703d033342ea54cf18d08eac74d5b1">arena_init_mutex</a></div><div class="ttdeci">static bool arena_init_mutex(t_arena *arena)</div><div class="ttdoc">Initialize the mutex used for thread-safe arena operations.</div><div class="ttdef"><b>Definition</b> arena_create.c:585</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga9b703d033342ea54cf18d08eac74d5b1" name="ga9b703d033342ea54cf18d08eac74d5b1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9b703d033342ea54cf18d08eac74d5b1">&#9670;&#160;</a></span>arena_init_mutex()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool arena_init_mutex </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structt__arena.html">t_arena</a> *&#160;</td>
          <td class="paramname"><em>arena</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="arena__create_8c.html">arena_create.c</a>&gt;</code></p>

<p>Initialize the mutex used for thread-safe arena operations. </p>
<p>If <code>ARENA_ENABLE_THREAD_SAFE</code> is defined, this function sets up a recursive <code>pthread_mutex_t</code> for the arena, enabling safe concurrent access to mutable fields like <code>offset</code> or marker stack state.</p>
<p>It uses <code>PTHREAD_MUTEX_RECURSIVE</code> to allow nested locks within the same thread, which is necessary for safe usage patterns like reentrant allocators or hooks.</p>
<p>On failure during any part of mutex attribute or lock initialization, it logs a detailed error and returns <code>false</code>. The caller is expected to clean up on failure.</p>
<p>If thread safety is not enabled at compile time, the function is a no-op that always returns <code>true</code>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">arena</td><td>Pointer to the arena for which the mutex should be initialized.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>true</code> on success, <code>false</code> if mutex setup failed.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__arena__internal.html#ga2dcc4e3f99d12e69a37bac4cf5401b63" title="Finalize the initialization of an arena with a provided buffer.">arena_finish_init</a> </dd>
<dd>
<a class="el" href="arena__create_8c.html#a4a0d8e453e26366da91c18877495ad42">arena_init_with_buffer</a> </dd></dl>
<dl class="section examples"><dt>Examples</dt><dd><a class="el" href="_2home_2toonsa_2myProjects_2memoryArena_2srcs_2core_2arena_create_8c-example.html#a10">/home/toonsa/myProjects/memoryArena/srcs/core/arena_create.c</a>.</dd>
</dl>
<div class="fragment"><div class="line"><span class="lineno">  586</span>{</div>
<div class="line"><span class="lineno">  587</span><span class="preprocessor">#ifdef ARENA_ENABLE_THREAD_SAFE</span></div>
<div class="line"><span class="lineno">  588</span>    pthread_mutexattr_t attr;</div>
<div class="line"><span class="lineno">  589</span>    <span class="keywordflow">if</span> (pthread_mutexattr_init(&amp;attr) != 0)</div>
<div class="line"><span class="lineno">  590</span>        <span class="keywordflow">goto</span> fail;</div>
<div class="line"><span class="lineno">  591</span>    <span class="keywordflow">if</span> (pthread_mutexattr_settype(&amp;attr, PTHREAD_MUTEX_RECURSIVE) != 0)</div>
<div class="line"><span class="lineno">  592</span>        <span class="keywordflow">goto</span> fail_attr;</div>
<div class="line"><span class="lineno">  593</span>    <span class="keywordflow">if</span> (pthread_mutex_init(&amp;arena-&gt;lock, &amp;attr) != 0)</div>
<div class="line"><span class="lineno">  594</span>        <span class="keywordflow">goto</span> fail_attr;</div>
<div class="line"><span class="lineno">  595</span>    pthread_mutexattr_destroy(&amp;attr);</div>
<div class="line"><span class="lineno">  596</span>    arena-&gt;use_lock = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  597</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  598</span>fail_attr:</div>
<div class="line"><span class="lineno">  599</span>    pthread_mutexattr_destroy(&amp;attr);</div>
<div class="line"><span class="lineno">  600</span>fail:</div>
<div class="line"><span class="lineno">  601</span>    <a class="code hl_function" href="group__arena__debug.html#gad19e051bc49dc6b6dcda0f31561e222d">arena_report_error</a>(NULL, <span class="stringliteral">&quot;arena_create failed: mutex setup failed&quot;</span>);</div>
<div class="line"><span class="lineno">  602</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  603</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno">  604</span>    (void) arena;</div>
<div class="line"><span class="lineno">  605</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  606</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  607</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ga621d65813296246955027fa3f7f05838" name="ga621d65813296246955027fa3f7f05838"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga621d65813296246955027fa3f7f05838">&#9670;&#160;</a></span>arena_is_valid()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool arena_is_valid </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structt__arena.html">t_arena</a> *&#160;</td>
          <td class="paramname"><em>arena</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="arena__internal_8h.html">arena_internal.h</a>&gt;</code></p>

<p>Check whether the given arena is in a valid, initialized state. </p>
<p>Check whether an arena is in a valid state.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">arena</td><td>Pointer to the arena to check. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>true</code> if the arena is valid, <code>false</code> otherwise.</dd></dl>
<p>This function verifies the structural integrity of a <code><a class="el" href="structt__arena.html" title="The main memory arena structure used for fast allocation.">t_arena</a></code> instance. It ensures:</p><ul>
<li>The arena pointer is not <code>NULL</code>.</li>
<li>The buffer pointer is initialized.</li>
<li>The size is non-zero and the current offset does not exceed the size.</li>
</ul>
<p>This is useful for defensive checks before performing operations on an arena.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">arena</td><td>Pointer to the arena to validate.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>true</code> if the arena is valid, <code>false</code> otherwise.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>This function does not verify internal metadata such as mutex state or hooks.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="arena_8h.html#a245dff47ef4fe5693b657a42deecf988">arena_init</a> </dd></dl>
<div class="fragment"><div class="line"><span class="lineno">  151</span>{</div>
<div class="line"><span class="lineno">  152</span>    <span class="keywordflow">if</span> (!arena)</div>
<div class="line"><span class="lineno">  153</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  154</span>    <span class="keywordflow">if</span> (!arena-&gt;buffer)</div>
<div class="line"><span class="lineno">  155</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  156</span>    <span class="keywordflow">if</span> (arena-&gt;size == 0 || arena-&gt;offset &gt; arena-&gt;size)</div>
<div class="line"><span class="lineno">  157</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  158</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  159</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ga2d9a7cc2eb2dd849843b312892303c71" name="ga2d9a7cc2eb2dd849843b312892303c71"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2d9a7cc2eb2dd849843b312892303c71">&#9670;&#160;</a></span>arena_log_and_teardown()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void arena_log_and_teardown </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structt__arena.html">t_arena</a> **&#160;</td>
          <td class="paramname"><em>arena</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>msg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="arena__create_8c.html">arena_create.c</a>&gt;</code></p>

<p>Report an error, destroy the arena, and free its memory. </p>
<p>This helper is used to cleanly handle failure paths in arena creation or initialization. It prints a formatted error message using <code>arena_report_error</code>, then proceeds to safely destroy the arena and free the <code><a class="el" href="structt__arena.html" title="The main memory arena structure used for fast allocation.">t_arena</a></code> structure via <code><a class="el" href="arena_8h.html#a640f54190aa0b356bc55787bfde1dcc5">arena_destroy()</a></code> and <code><a class="el" href="arena_8h.html#a7821a62eaf6d9f982322e49eaf6153e8">arena_delete()</a></code>.</p>
<p>If the <code>arena</code> pointer is <code>NULL</code> or points to <code>NULL</code>, only the error is logged and no cleanup is performed. This guards against double-frees or null dereferences.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">arena</td><td>A pointer to a pointer to a <code><a class="el" href="structt__arena.html" title="The main memory arena structure used for fast allocation.">t_arena</a></code> structure. May be <code>NULL</code>. </td></tr>
    <tr><td class="paramname">msg</td><td>A formatted error message passed to <code>arena_report_error</code>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>This function assumes ownership of the <code>arena</code> and will leave the pointer invalid.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="arena__create_8c.html#ad623b3dfc5761c29d44f78c58821c932">arena_create</a> </dd>
<dd>
<a class="el" href="arena__create_8c.html#a245dff47ef4fe5693b657a42deecf988">arena_init</a> </dd>
<dd>
<a class="el" href="group__arena__debug.html#gad19e051bc49dc6b6dcda0f31561e222d" title="Report an error from an arena using its configured error callback.">arena_report_error</a> </dd>
<dd>
<a class="el" href="arena_8h.html#a640f54190aa0b356bc55787bfde1dcc5">arena_destroy</a> </dd>
<dd>
<a class="el" href="arena_8h.html#a7821a62eaf6d9f982322e49eaf6153e8">arena_delete</a> </dd></dl>
<dl class="section examples"><dt>Examples</dt><dd><a class="el" href="_2home_2toonsa_2myProjects_2memoryArena_2srcs_2core_2arena_create_8c-example.html#a7">/home/toonsa/myProjects/memoryArena/srcs/core/arena_create.c</a>.</dd>
</dl>
<div class="fragment"><div class="line"><span class="lineno">  459</span>{</div>
<div class="line"><span class="lineno">  460</span>    <span class="keywordflow">if</span> (!arena || !*arena)</div>
<div class="line"><span class="lineno">  461</span>    {</div>
<div class="line"><span class="lineno">  462</span>        <a class="code hl_function" href="group__arena__debug.html#gad19e051bc49dc6b6dcda0f31561e222d">arena_report_error</a>(NULL, <span class="stringliteral">&quot;%s&quot;</span>, msg);</div>
<div class="line"><span class="lineno">  463</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  464</span>    }</div>
<div class="line"><span class="lineno">  465</span>    <a class="code hl_function" href="group__arena__debug.html#gad19e051bc49dc6b6dcda0f31561e222d">arena_report_error</a>(*arena, <span class="stringliteral">&quot;%s&quot;</span>, msg);</div>
<div class="line"><span class="lineno">  466</span>    <a class="code hl_function" href="arena_8h.html#a640f54190aa0b356bc55787bfde1dcc5">arena_destroy</a>(*arena);</div>
<div class="line"><span class="lineno">  467</span>    <a class="code hl_function" href="arena_8h.html#a7821a62eaf6d9f982322e49eaf6153e8">arena_delete</a>(arena);</div>
<div class="line"><span class="lineno">  468</span>}</div>
<div class="ttc" id="aarena_8h_html_a640f54190aa0b356bc55787bfde1dcc5"><div class="ttname"><a href="arena_8h.html#a640f54190aa0b356bc55787bfde1dcc5">arena_destroy</a></div><div class="ttdeci">void arena_destroy(t_arena *arena)</div><div class="ttdef"><b>Definition</b> arena_cleanup.c:82</div></div>
<div class="ttc" id="aarena_8h_html_a7821a62eaf6d9f982322e49eaf6153e8"><div class="ttname"><a href="arena_8h.html#a7821a62eaf6d9f982322e49eaf6153e8">arena_delete</a></div><div class="ttdeci">void arena_delete(t_arena **arena)</div><div class="ttdef"><b>Definition</b> arena_cleanup.c:148</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga158ae1db776df1d113e7cddff4c9ca2f" name="ga158ae1db776df1d113e7cddff4c9ca2f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga158ae1db776df1d113e7cddff4c9ca2f">&#9670;&#160;</a></span>arena_reset_metadata()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void arena_reset_metadata </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structt__arena.html">t_arena</a> *&#160;</td>
          <td class="paramname"><em>arena</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="arena__create_8c.html">arena_create.c</a>&gt;</code></p>

<p>Reset all arena metadata fields to their default initial state. </p>
<p>This function clears the entire <code><a class="el" href="structt__arena.html" title="The main memory arena structure used for fast allocation.">t_arena</a></code> structure's internal metadata, ensuring a clean and consistent base before the arena is initialized.</p>
<p>It performs the following actions:</p><ul>
<li>Nullifies the memory buffer and resets size/offset tracking.</li>
<li>Clears the marker stack and parent reference.</li>
<li>Sets the default grow callback and debug error handler.</li>
<li>Clears all debug metadata and hook pointers.</li>
<li>Resets all internal statistics via <code>arena_stats_reset</code>.</li>
<li>Initializes atomic flags like <code>owns_buffer</code>, <code>can_grow</code>, and <code>is_destroying</code>.</li>
<li>Disables locking if thread safety is enabled.</li>
</ul>
<p>This function must be called before using or reinitializing the arena. It is designed to avoid stale data and ensure safe concurrent visibility.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">arena</td><td>Pointer to the arena to reset.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>This function does <b>not</b> free or allocate memory. It only resets metadata.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__arena__internal.html#ga2dcc4e3f99d12e69a37bac4cf5401b63" title="Finalize the initialization of an arena with a provided buffer.">arena_finish_init</a> </dd>
<dd>
<a class="el" href="arena__create_8c.html#a4a0d8e453e26366da91c18877495ad42">arena_init_with_buffer</a> </dd></dl>
<dl class="section examples"><dt>Examples</dt><dd><a class="el" href="_2home_2toonsa_2myProjects_2memoryArena_2srcs_2core_2arena_create_8c-example.html#a9">/home/toonsa/myProjects/memoryArena/srcs/core/arena_create.c</a>.</dd>
</dl>
<div class="fragment"><div class="line"><span class="lineno">  531</span>{</div>
<div class="line"><span class="lineno">  532</span>    arena-&gt;buffer           = NULL;</div>
<div class="line"><span class="lineno">  533</span>    arena-&gt;size             = 0;</div>
<div class="line"><span class="lineno">  534</span>    arena-&gt;offset           = 0;</div>
<div class="line"><span class="lineno">  535</span>    arena-&gt;marker_stack_top = 0;</div>
<div class="line"><span class="lineno">  536</span>    memset(arena-&gt;marker_stack, 0, <span class="keyword">sizeof</span>(arena-&gt;marker_stack));</div>
<div class="line"><span class="lineno">  537</span>    arena-&gt;parent_ref = NULL;</div>
<div class="line"><span class="lineno">  538</span> </div>
<div class="line"><span class="lineno">  539</span>    arena-&gt;grow_cb             = <a class="code hl_function" href="group__arena__internal.html#ga627d4fdc46e225dccde0388ae40d04de">default_grow_cb</a>;</div>
<div class="line"><span class="lineno">  540</span>    arena-&gt;debug.error_cb      = <a class="code hl_function" href="group__arena__debug.html#ga3e58b128a2f84c4ed41102243bf38634">arena_default_error_callback</a>;</div>
<div class="line"><span class="lineno">  541</span>    arena-&gt;debug.error_context = NULL;</div>
<div class="line"><span class="lineno">  542</span>    arena-&gt;debug.label         = NULL;</div>
<div class="line"><span class="lineno">  543</span> </div>
<div class="line"><span class="lineno">  544</span>    arena-&gt;hooks.hook_cb = NULL;</div>
<div class="line"><span class="lineno">  545</span>    arena-&gt;hooks.context = NULL;</div>
<div class="line"><span class="lineno">  546</span> </div>
<div class="line"><span class="lineno">  547</span>    <a class="code hl_function" href="group__arena__stats.html#ga158f6a0623850d3dc681d9ecab1fe27f">arena_stats_reset</a>(&amp;arena-&gt;stats);</div>
<div class="line"><span class="lineno">  548</span> </div>
<div class="line"><span class="lineno">  549</span>    atomic_store_explicit(&amp;arena-&gt;owns_buffer, <span class="keyword">false</span>, memory_order_release);</div>
<div class="line"><span class="lineno">  550</span>    atomic_store_explicit(&amp;arena-&gt;can_grow, <span class="keyword">false</span>, memory_order_release);</div>
<div class="line"><span class="lineno">  551</span>    atomic_store_explicit(&amp;arena-&gt;is_destroying, <span class="keyword">false</span>, memory_order_release);</div>
<div class="line"><span class="lineno">  552</span> </div>
<div class="line"><span class="lineno">  553</span><span class="preprocessor">#ifdef ARENA_ENABLE_THREAD_SAFE</span></div>
<div class="line"><span class="lineno">  554</span>    arena-&gt;use_lock = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  555</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  556</span>}</div>
<div class="ttc" id="agroup__arena__debug_html_ga3e58b128a2f84c4ed41102243bf38634"><div class="ttname"><a href="group__arena__debug.html#ga3e58b128a2f84c4ed41102243bf38634">arena_default_error_callback</a></div><div class="ttdeci">void arena_default_error_callback(const char *msg, void *ctx)</div><div class="ttdoc">Default fallback error callback (prints to stderr).</div><div class="ttdef"><b>Definition</b> arena_debug.c:310</div></div>
<div class="ttc" id="agroup__arena__internal_html_ga627d4fdc46e225dccde0388ae40d04de"><div class="ttname"><a href="group__arena__internal.html#ga627d4fdc46e225dccde0388ae40d04de">default_grow_cb</a></div><div class="ttdeci">size_t default_grow_cb(size_t current_size, size_t requested_size)</div><div class="ttdoc">Default growth policy callback for arena resizing.</div><div class="ttdef"><b>Definition</b> arena_internal.c:78</div></div>
<div class="ttc" id="agroup__arena__stats_html_ga158f6a0623850d3dc681d9ecab1fe27f"><div class="ttname"><a href="group__arena__stats.html#ga158f6a0623850d3dc681d9ecab1fe27f">arena_stats_reset</a></div><div class="ttdeci">void arena_stats_reset(t_arena_stats *stats)</div><div class="ttdoc">Reset the given statistics structure to zero.</div><div class="ttdef"><b>Definition</b> arena_internal.c:187</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga8e94425910ed0ce27fd21cda3937ad56" name="ga8e94425910ed0ce27fd21cda3937ad56"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8e94425910ed0ce27fd21cda3937ad56">&#9670;&#160;</a></span>arena_set_allocated_buffer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool arena_set_allocated_buffer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structt__arena.html">t_arena</a> *&#160;</td>
          <td class="paramname"><em>arena</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="arena__create_8c.html">arena_create.c</a>&gt;</code></p>

<p>Allocate and assign a zero-initialized buffer to an arena. </p>
<p>This function is used internally when no user-supplied buffer is provided during <code>arena_init_with_buffer</code>. It dynamically allocates a memory region of the requested size using <code>calloc</code>, stores the resulting buffer and size into the arena, and marks the arena as the owner of the buffer so it can be freed on destruction.</p>
<p>If the memory allocation fails, the function logs a formatted error using <code>arena_report_error</code> and returns <code>false</code>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">arena</td><td>Pointer to the arena receiving the allocated buffer. </td></tr>
    <tr><td class="paramname">size</td><td>Number of bytes to allocate.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>true</code> if allocation and assignment succeeded, <code>false</code> on failure.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__arena__internal.html#ga5f5cec8e7ef56c3bf1ec9336e54f1a48" title="Configure an arena&#39;s buffer by either assigning a user-provided region or allocating one internally.">arena_set_or_alloc_buffer</a> </dd>
<dd>
<a class="el" href="arena__create_8c.html#a4a0d8e453e26366da91c18877495ad42">arena_init_with_buffer</a> </dd></dl>
<dl class="section examples"><dt>Examples</dt><dd><a class="el" href="_2home_2toonsa_2myProjects_2memoryArena_2srcs_2core_2arena_create_8c-example.html#a12">/home/toonsa/myProjects/memoryArena/srcs/core/arena_create.c</a>.</dd>
</dl>
<div class="fragment"><div class="line"><span class="lineno">  683</span>{</div>
<div class="line"><span class="lineno">  684</span>    <span class="keywordtype">void</span>* buffer = calloc(1, size);</div>
<div class="line"><span class="lineno">  685</span>    <span class="keywordflow">if</span> (!buffer)</div>
<div class="line"><span class="lineno">  686</span>    {</div>
<div class="line"><span class="lineno">  687</span>        <a class="code hl_function" href="group__arena__debug.html#gad19e051bc49dc6b6dcda0f31561e222d">arena_report_error</a>(NULL, <span class="stringliteral">&quot;arena_init_with_buffer: malloc for %zu bytes failed&quot;</span>, size);</div>
<div class="line"><span class="lineno">  688</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  689</span>    }</div>
<div class="line"><span class="lineno">  690</span>    arena-&gt;buffer = (uint8_t*) buffer;</div>
<div class="line"><span class="lineno">  691</span>    arena-&gt;size   = size;</div>
<div class="line"><span class="lineno">  692</span>    atomic_store_explicit(&amp;arena-&gt;owns_buffer, <span class="keyword">true</span>, memory_order_release);</div>
<div class="line"><span class="lineno">  693</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  694</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ga9460f83f6dae2993ccbd6a388944bf7c" name="ga9460f83f6dae2993ccbd6a388944bf7c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9460f83f6dae2993ccbd6a388944bf7c">&#9670;&#160;</a></span>arena_set_default_label()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void arena_set_default_label </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structt__arena.html">t_arena</a> *&#160;</td>
          <td class="paramname"><em>arena</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>fallback</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="arena__create_8c.html">arena_create.c</a>&gt;</code></p>

<p>Set a fallback debug label if none is set. </p>
<p>This internal utility ensures that an arena has a human-readable label for debugging and error reporting. If the <code>arena-&gt;debug.label</code> is <code>NULL</code>, it assigns the provided fallback label.</p>
<p>Labels are used in logs and diagnostic tools to identify arenas more easily, especially in multi-arena systems or when visualizing memory usage.</p>
<p>This function is used during initialization, after clearing metadata.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">arena</td><td>Pointer to the arena structure to label. </td></tr>
    <tr><td class="paramname">fallback</td><td>The default label to assign if no label is already set.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>This does not copy the string; it simply sets the pointer. The fallback string must remain valid for the arena’s lifetime.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="arena__create_8c.html#ad623b3dfc5761c29d44f78c58821c932">arena_create</a> </dd>
<dd>
<a class="el" href="arena__create_8c.html#a245dff47ef4fe5693b657a42deecf988">arena_init</a> </dd>
<dd>
<a class="el" href="arena__create_8c.html#a4a0d8e453e26366da91c18877495ad42">arena_init_with_buffer</a> </dd></dl>
<dl class="section examples"><dt>Examples</dt><dd><a class="el" href="_2home_2toonsa_2myProjects_2memoryArena_2srcs_2core_2arena_create_8c-example.html#a5">/home/toonsa/myProjects/memoryArena/srcs/core/arena_create.c</a>.</dd>
</dl>
<div class="fragment"><div class="line"><span class="lineno">  399</span>{</div>
<div class="line"><span class="lineno">  400</span>    <span class="keywordflow">if</span> (!arena-&gt;debug.label)</div>
<div class="line"><span class="lineno">  401</span>        arena-&gt;debug.label = fallback;</div>
<div class="line"><span class="lineno">  402</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ga5f5cec8e7ef56c3bf1ec9336e54f1a48" name="ga5f5cec8e7ef56c3bf1ec9336e54f1a48"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5f5cec8e7ef56c3bf1ec9336e54f1a48">&#9670;&#160;</a></span>arena_set_or_alloc_buffer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool arena_set_or_alloc_buffer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structt__arena.html">t_arena</a> *&#160;</td>
          <td class="paramname"><em>arena</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="arena__create_8c.html">arena_create.c</a>&gt;</code></p>

<p>Configure an arena's buffer by either assigning a user-provided region or allocating one internally. </p>
<p>This helper determines whether to allocate memory or use an existing buffer based on the parameters:</p><ul>
<li>If <code>buffer</code> is <code>NULL</code> and <code>size &gt; 0</code>, it allocates a new zeroed buffer using <code>calloc</code>.</li>
<li>Otherwise, it sets the arena's buffer to the provided memory region.</li>
</ul>
<p>In both cases, it updates the <code>owns_buffer</code> flag accordingly to ensure proper cleanup behavior in <code><a class="el" href="arena_8h.html#a640f54190aa0b356bc55787bfde1dcc5">arena_destroy()</a></code>. This function helps unify buffer configuration logic in <code>arena_init_with_buffer</code>, reducing duplication and clarifying intent.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">arena</td><td>Pointer to the arena to configure. </td></tr>
    <tr><td class="paramname">buffer</td><td>Pointer to the caller-supplied memory buffer (can be <code>NULL</code>). </td></tr>
    <tr><td class="paramname">size</td><td>Size (in bytes) of the buffer.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>true</code> on success, <code>false</code> if memory allocation failed.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="arena__create_8c.html#a4a0d8e453e26366da91c18877495ad42">arena_init_with_buffer</a> </dd></dl>
<dl class="section examples"><dt>Examples</dt><dd><a class="el" href="_2home_2toonsa_2myProjects_2memoryArena_2srcs_2core_2arena_create_8c-example.html#a14">/home/toonsa/myProjects/memoryArena/srcs/core/arena_create.c</a>.</dd>
</dl>
<div class="fragment"><div class="line"><span class="lineno">  751</span>{</div>
<div class="line"><span class="lineno">  752</span>    <span class="keywordflow">if</span> (!buffer &amp;&amp; size &gt; 0)</div>
<div class="line"><span class="lineno">  753</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="group__arena__internal.html#ga8e94425910ed0ce27fd21cda3937ad56">arena_set_allocated_buffer</a>(arena, size);</div>
<div class="line"><span class="lineno">  754</span> </div>
<div class="line"><span class="lineno">  755</span>    <a class="code hl_function" href="group__arena__internal.html#ga1d3f6bfa8145e31ab67a0cf9bce5f222">arena_set_user_buffer</a>(arena, buffer, size);</div>
<div class="line"><span class="lineno">  756</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  757</span>}</div>
<div class="ttc" id="agroup__arena__internal_html_ga1d3f6bfa8145e31ab67a0cf9bce5f222"><div class="ttname"><a href="group__arena__internal.html#ga1d3f6bfa8145e31ab67a0cf9bce5f222">arena_set_user_buffer</a></div><div class="ttdeci">static void arena_set_user_buffer(t_arena *arena, void *buffer, size_t size)</div><div class="ttdoc">Assign a user-provided buffer to an arena without taking ownership.</div><div class="ttdef"><b>Definition</b> arena_create.c:719</div></div>
<div class="ttc" id="agroup__arena__internal_html_ga8e94425910ed0ce27fd21cda3937ad56"><div class="ttname"><a href="group__arena__internal.html#ga8e94425910ed0ce27fd21cda3937ad56">arena_set_allocated_buffer</a></div><div class="ttdeci">static bool arena_set_allocated_buffer(t_arena *arena, size_t size)</div><div class="ttdoc">Allocate and assign a zero-initialized buffer to an arena.</div><div class="ttdef"><b>Definition</b> arena_create.c:682</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga1d3f6bfa8145e31ab67a0cf9bce5f222" name="ga1d3f6bfa8145e31ab67a0cf9bce5f222"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1d3f6bfa8145e31ab67a0cf9bce5f222">&#9670;&#160;</a></span>arena_set_user_buffer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void arena_set_user_buffer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structt__arena.html">t_arena</a> *&#160;</td>
          <td class="paramname"><em>arena</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="arena__create_8c.html">arena_create.c</a>&gt;</code></p>

<p>Assign a user-provided buffer to an arena without taking ownership. </p>
<p>This function sets up the arena's buffer and size fields using a buffer provided by the caller. It does not allocate or copy memory — it simply stores the pointer and size, and marks the arena as not owning the buffer. This means the buffer will not be freed when the arena is destroyed.</p>
<p>It is typically used when initializing or reinitializing an arena that operates over pre-allocated memory regions, such as stack memory or memory-mapped regions.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">arena</td><td>Pointer to the arena being configured. </td></tr>
    <tr><td class="paramname">buffer</td><td>Pointer to the caller-supplied buffer. </td></tr>
    <tr><td class="paramname">size</td><td>Size (in bytes) of the buffer.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__arena__internal.html#ga5f5cec8e7ef56c3bf1ec9336e54f1a48" title="Configure an arena&#39;s buffer by either assigning a user-provided region or allocating one internally.">arena_set_or_alloc_buffer</a> </dd>
<dd>
<a class="el" href="arena__create_8c.html#a4a0d8e453e26366da91c18877495ad42">arena_init_with_buffer</a> </dd></dl>
<dl class="section examples"><dt>Examples</dt><dd><a class="el" href="_2home_2toonsa_2myProjects_2memoryArena_2srcs_2core_2arena_create_8c-example.html#a13">/home/toonsa/myProjects/memoryArena/srcs/core/arena_create.c</a>.</dd>
</dl>
<div class="fragment"><div class="line"><span class="lineno">  720</span>{</div>
<div class="line"><span class="lineno">  721</span>    arena-&gt;buffer = (uint8_t*) buffer;</div>
<div class="line"><span class="lineno">  722</span>    arena-&gt;size   = size;</div>
<div class="line"><span class="lineno">  723</span>    atomic_store_explicit(&amp;arena-&gt;owns_buffer, <span class="keyword">false</span>, memory_order_release);</div>
<div class="line"><span class="lineno">  724</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ga158f6a0623850d3dc681d9ecab1fe27f" name="ga158f6a0623850d3dc681d9ecab1fe27f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga158f6a0623850d3dc681d9ecab1fe27f">&#9670;&#160;</a></span>arena_stats_reset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void arena_stats_reset </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__arena__stats.html#ga5c30fe6780dafbd7e5a8c3b86d25afba">t_arena_stats</a> *&#160;</td>
          <td class="paramname"><em>stats</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="arena__internal_8c.html">arena_internal.c</a>&gt;</code></p>

<p>Reset all allocation statistics in an arena stats structure. </p>
<p>Reset the given statistics structure to zero.</p>
<p>This function clears all fields in a <code>t_arena_stats</code> structure, effectively resetting the arena's statistical tracking to an initial state.</p>
<p>It resets:</p><ul>
<li>Allocation and reallocation counters.</li>
<li>Total bytes allocated and wasted.</li>
<li>Peak usage and live allocation tracking.</li>
<li>Last allocation metadata (size, offset, ID).</li>
<li>Growth history tracking and counter.</li>
</ul>
<p>This is typically called during arena initialization or reuse.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">stats</td><td>Pointer to the <code>t_arena_stats</code> structure to reset.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>If <code>stats</code> is <code>NULL</code>, the function does nothing.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__arena__internal.html#ga268aa3f7256dbdf405391501fedbabd4" title="Zero out and reset all debug/stats metadata associated with the arena.">arena_zero_metadata</a> </dd></dl>
<div class="fragment"><div class="line"><span class="lineno">  188</span>{</div>
<div class="line"><span class="lineno">  189</span>    <span class="keywordflow">if</span> (!stats)</div>
<div class="line"><span class="lineno">  190</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  191</span> </div>
<div class="line"><span class="lineno">  192</span>    stats-&gt;<a class="code hl_variable" href="group__arena__stats.html#ad93d7ddf5a3dda959013c4777d724b6b">allocations</a>            = 0;</div>
<div class="line"><span class="lineno">  193</span>    stats-&gt;<a class="code hl_variable" href="group__arena__stats.html#a3341518cae0114bfbcc644c60963568b">reallocations</a>          = 0;</div>
<div class="line"><span class="lineno">  194</span>    stats-&gt;<a class="code hl_variable" href="group__arena__stats.html#a8e3b629d6141cbf57e67ea8e9597b29c">failed_allocations</a>     = 0;</div>
<div class="line"><span class="lineno">  195</span>    stats-&gt;<a class="code hl_variable" href="group__arena__stats.html#af2fda128c113473fa548f320a6a32017">live_allocations</a>       = 0;</div>
<div class="line"><span class="lineno">  196</span>    stats-&gt;<a class="code hl_variable" href="group__arena__stats.html#ad231cae09d7bdf212cc9570cb74e8c1c">bytes_allocated</a>        = 0;</div>
<div class="line"><span class="lineno">  197</span>    stats-&gt;<a class="code hl_variable" href="group__arena__stats.html#a9e638ee160cb3bb7f1cdb538a4f93568">wasted_alignment_bytes</a> = 0;</div>
<div class="line"><span class="lineno">  198</span>    stats-&gt;<a class="code hl_variable" href="group__arena__stats.html#a1cdea807971dd72497ae281f5588c4f1">shrinks</a>                = 0;</div>
<div class="line"><span class="lineno">  199</span>    stats-&gt;<a class="code hl_variable" href="group__arena__stats.html#a22524712472720b802d5a4131e43b098">peak_usage</a>             = 0;</div>
<div class="line"><span class="lineno">  200</span>    stats-&gt;<a class="code hl_variable" href="group__arena__stats.html#a0313fcbfc15c79a0cae03df3d14adc2b">last_alloc_size</a>        = 0;</div>
<div class="line"><span class="lineno">  201</span>    stats-&gt;<a class="code hl_variable" href="group__arena__stats.html#af74b04da79e57175f192c40ede1a59aa">last_alloc_offset</a>      = 0;</div>
<div class="line"><span class="lineno">  202</span>    stats-&gt;<a class="code hl_variable" href="group__arena__stats.html#aaef1554ba87f5c259f22c96ea403288d">last_alloc_id</a>          = (size_t) -1;</div>
<div class="line"><span class="lineno">  203</span>    stats-&gt;<a class="code hl_variable" href="group__arena__stats.html#ad8952303c875bfe6f549c7b695690c8f">alloc_id_counter</a>       = 0;</div>
<div class="line"><span class="lineno">  204</span>    stats-&gt;<a class="code hl_variable" href="group__arena__stats.html#ad45b4e0b914c54b8fdb2251aa233988a">growth_history</a>         = NULL;</div>
<div class="line"><span class="lineno">  205</span>    stats-&gt;<a class="code hl_variable" href="group__arena__stats.html#a35beeb231377f3d77ffef0fc8d7e9fbb">growth_history_count</a>   = 0;</div>
<div class="line"><span class="lineno">  206</span>}</div>
<div class="ttc" id="agroup__arena__stats_html_a0313fcbfc15c79a0cae03df3d14adc2b"><div class="ttname"><a href="group__arena__stats.html#a0313fcbfc15c79a0cae03df3d14adc2b">s_arena_stats::last_alloc_size</a></div><div class="ttdeci">size_t last_alloc_size</div><div class="ttdoc">Size of the last allocation.</div><div class="ttdef"><b>Definition</b> arena_stats.h:64</div></div>
<div class="ttc" id="agroup__arena__stats_html_a1cdea807971dd72497ae281f5588c4f1"><div class="ttname"><a href="group__arena__stats.html#a1cdea807971dd72497ae281f5588c4f1">s_arena_stats::shrinks</a></div><div class="ttdeci">size_t shrinks</div><div class="ttdoc">Number of times the arena was shrunk.</div><div class="ttdef"><b>Definition</b> arena_stats.h:60</div></div>
<div class="ttc" id="agroup__arena__stats_html_a22524712472720b802d5a4131e43b098"><div class="ttname"><a href="group__arena__stats.html#a22524712472720b802d5a4131e43b098">s_arena_stats::peak_usage</a></div><div class="ttdeci">size_t peak_usage</div><div class="ttdoc">Highest offset reached (i.e., peak memory usage)</div><div class="ttdef"><b>Definition</b> arena_stats.h:58</div></div>
<div class="ttc" id="agroup__arena__stats_html_a3341518cae0114bfbcc644c60963568b"><div class="ttname"><a href="group__arena__stats.html#a3341518cae0114bfbcc644c60963568b">s_arena_stats::reallocations</a></div><div class="ttdeci">size_t reallocations</div><div class="ttdoc">Total number of reallocations (via arena_realloc_last)</div><div class="ttdef"><b>Definition</b> arena_stats.h:56</div></div>
<div class="ttc" id="agroup__arena__stats_html_a35beeb231377f3d77ffef0fc8d7e9fbb"><div class="ttname"><a href="group__arena__stats.html#a35beeb231377f3d77ffef0fc8d7e9fbb">s_arena_stats::growth_history_count</a></div><div class="ttdeci">size_t growth_history_count</div><div class="ttdoc">Number of growth events recorded.</div><div class="ttdef"><b>Definition</b> arena_stats.h:62</div></div>
<div class="ttc" id="agroup__arena__stats_html_a8e3b629d6141cbf57e67ea8e9597b29c"><div class="ttname"><a href="group__arena__stats.html#a8e3b629d6141cbf57e67ea8e9597b29c">s_arena_stats::failed_allocations</a></div><div class="ttdeci">size_t failed_allocations</div><div class="ttdoc">Number of failed allocation attempts.</div><div class="ttdef"><b>Definition</b> arena_stats.h:68</div></div>
<div class="ttc" id="agroup__arena__stats_html_a9e638ee160cb3bb7f1cdb538a4f93568"><div class="ttname"><a href="group__arena__stats.html#a9e638ee160cb3bb7f1cdb538a4f93568">s_arena_stats::wasted_alignment_bytes</a></div><div class="ttdeci">size_t wasted_alignment_bytes</div><div class="ttdoc">Total bytes wasted due to alignment padding.</div><div class="ttdef"><b>Definition</b> arena_stats.h:59</div></div>
<div class="ttc" id="agroup__arena__stats_html_aaef1554ba87f5c259f22c96ea403288d"><div class="ttname"><a href="group__arena__stats.html#aaef1554ba87f5c259f22c96ea403288d">s_arena_stats::last_alloc_id</a></div><div class="ttdeci">size_t last_alloc_id</div><div class="ttdoc">Unique ID of the last allocation.</div><div class="ttdef"><b>Definition</b> arena_stats.h:66</div></div>
<div class="ttc" id="agroup__arena__stats_html_ad231cae09d7bdf212cc9570cb74e8c1c"><div class="ttname"><a href="group__arena__stats.html#ad231cae09d7bdf212cc9570cb74e8c1c">s_arena_stats::bytes_allocated</a></div><div class="ttdeci">size_t bytes_allocated</div><div class="ttdoc">Cumulative bytes allocated.</div><div class="ttdef"><b>Definition</b> arena_stats.h:57</div></div>
<div class="ttc" id="agroup__arena__stats_html_ad45b4e0b914c54b8fdb2251aa233988a"><div class="ttname"><a href="group__arena__stats.html#ad45b4e0b914c54b8fdb2251aa233988a">s_arena_stats::growth_history</a></div><div class="ttdeci">size_t * growth_history</div><div class="ttdoc">Array of size values recorded during arena growth.</div><div class="ttdef"><b>Definition</b> arena_stats.h:61</div></div>
<div class="ttc" id="agroup__arena__stats_html_ad8952303c875bfe6f549c7b695690c8f"><div class="ttname"><a href="group__arena__stats.html#ad8952303c875bfe6f549c7b695690c8f">s_arena_stats::alloc_id_counter</a></div><div class="ttdeci">size_t alloc_id_counter</div><div class="ttdoc">Total allocation ID counter (used for tracking)</div><div class="ttdef"><b>Definition</b> arena_stats.h:67</div></div>
<div class="ttc" id="agroup__arena__stats_html_ad93d7ddf5a3dda959013c4777d724b6b"><div class="ttname"><a href="group__arena__stats.html#ad93d7ddf5a3dda959013c4777d724b6b">s_arena_stats::allocations</a></div><div class="ttdeci">size_t allocations</div><div class="ttdoc">Total number of successful allocations.</div><div class="ttdef"><b>Definition</b> arena_stats.h:55</div></div>
<div class="ttc" id="agroup__arena__stats_html_af2fda128c113473fa548f320a6a32017"><div class="ttname"><a href="group__arena__stats.html#af2fda128c113473fa548f320a6a32017">s_arena_stats::live_allocations</a></div><div class="ttdeci">size_t live_allocations</div><div class="ttdoc">Number of active allocations (not yet released)</div><div class="ttdef"><b>Definition</b> arena_stats.h:63</div></div>
<div class="ttc" id="agroup__arena__stats_html_af74b04da79e57175f192c40ede1a59aa"><div class="ttname"><a href="group__arena__stats.html#af74b04da79e57175f192c40ede1a59aa">s_arena_stats::last_alloc_offset</a></div><div class="ttdeci">size_t last_alloc_offset</div><div class="ttdoc">Offset of the last allocation.</div><div class="ttdef"><b>Definition</b> arena_stats.h:65</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="gaa3a1838aa18111801b980c0b81e37813" name="gaa3a1838aa18111801b980c0b81e37813"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa3a1838aa18111801b980c0b81e37813">&#9670;&#160;</a></span>arena_update_peak()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void arena_update_peak </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structt__arena.html">t_arena</a> *&#160;</td>
          <td class="paramname"><em>arena</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="arena__internal_8h.html">arena_internal.h</a>&gt;</code></p>

<p>Update the arena’s peak memory usage if the current usage exceeds it. </p>
<p>Update the peak usage metric of the arena.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">arena</td><td>Pointer to the arena to update. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void</dd></dl>
<p>This internal function updates the <code>peak_usage</code> statistic in the arena if the current offset exceeds the previously recorded peak. This metric reflects the highest memory usage observed since the arena was initialized or last reset.</p>
<p>It uses locking to ensure thread-safe updates in concurrent environments.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">arena</td><td>Pointer to the arena whose peak usage should be updated.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>This function is typically called after a successful allocation or reallocation.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__arena__alloc__internal.html#ga9f456348bfdf8040dd8d3fbf26bfd4fa" title="Update offset, peak usage, and statistics.">arena_commit_allocation</a> </dd>
<dd>
<a class="el" href="group__arena__alloc__internal.html#gaf5e38e7a826283f488841979faec9f00" title="Update arena statistics after a successful reallocation.">update_realloc_stats</a> </dd></dl>
<dl class="section examples"><dt>Examples</dt><dd><a class="el" href="_2home_2toonsa_2myProjects_2memoryArena_2srcs_2core_2allocation_2arena_alloc_8c-example.html#a24">/home/toonsa/myProjects/memoryArena/srcs/core/allocation/arena_alloc.c</a>, and <a class="el" href="_2home_2toonsa_2myProjects_2memoryArena_2srcs_2core_2allocation_2arena_realloc_last_8c-example.html#a14">/home/toonsa/myProjects/memoryArena/srcs/core/allocation/arena_realloc_last.c</a>.</dd>
</dl>
<div class="fragment"><div class="line"><span class="lineno">  119</span>{</div>
<div class="line"><span class="lineno">  120</span>    <a class="code hl_define" href="arena__internal_8h.html#a5aca30bebc88f9c38377ff61521b3796">ARENA_LOCK</a>(arena);</div>
<div class="line"><span class="lineno">  121</span>    <span class="keywordflow">if</span> (arena-&gt;offset &gt; arena-&gt;stats.peak_usage)</div>
<div class="line"><span class="lineno">  122</span>        arena-&gt;stats.peak_usage = arena-&gt;offset;</div>
<div class="line"><span class="lineno">  123</span>    <a class="code hl_define" href="arena__internal_8h.html#a22d9551decc1373f55ceb93bcd8b27a3">ARENA_UNLOCK</a>(arena);</div>
<div class="line"><span class="lineno">  124</span>}</div>
<div class="ttc" id="aarena__internal_8h_html_a22d9551decc1373f55ceb93bcd8b27a3"><div class="ttname"><a href="arena__internal_8h.html#a22d9551decc1373f55ceb93bcd8b27a3">ARENA_UNLOCK</a></div><div class="ttdeci">#define ARENA_UNLOCK(arena)</div><div class="ttdef"><b>Definition</b> arena_internal.h:62</div></div>
<div class="ttc" id="aarena__internal_8h_html_a5aca30bebc88f9c38377ff61521b3796"><div class="ttname"><a href="arena__internal_8h.html#a5aca30bebc88f9c38377ff61521b3796">ARENA_LOCK</a></div><div class="ttdeci">#define ARENA_LOCK(arena)</div><div class="ttdoc">Acquire the mutex lock if thread safety is enabled.</div><div class="ttdef"><b>Definition</b> arena_internal.h:61</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga268aa3f7256dbdf405391501fedbabd4" name="ga268aa3f7256dbdf405391501fedbabd4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga268aa3f7256dbdf405391501fedbabd4">&#9670;&#160;</a></span>arena_zero_metadata()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void arena_zero_metadata </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structt__arena.html">t_arena</a> *&#160;</td>
          <td class="paramname"><em>arena</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="arena__internal_8h.html">arena_internal.h</a>&gt;</code></p>

<p>Zero out and reset all debug/stats metadata associated with the arena. </p>
<p>Reset all metadata fields in an arena to their default values.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">arena</td><td>Pointer to the arena to zero. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void</dd></dl>
<p>This function clears all metadata inside a <code><a class="el" href="structt__arena.html" title="The main memory arena structure used for fast allocation.">t_arena</a></code> structure, preparing it for safe reinitialization. It does <b>not</b> free or allocate memory, but resets all fields related to memory layout, statistics, growth policies, debugging, and hooks.</p>
<p>Specifically, it:</p><ul>
<li>Sets the buffer pointer, size, and offset to zero.</li>
<li>Resets ownership and growth flags atomically.</li>
<li>Clears growth callback and parent references.</li>
<li>Resets all statistical counters via <code><a class="el" href="group__arena__internal.html#ga158f6a0623850d3dc681d9ecab1fe27f" title="Reset all allocation statistics in an arena stats structure.">arena_stats_reset()</a></code>.</li>
<li>Clears debug fields including ID, label, and error context.</li>
<li>Resets hook-related pointers.</li>
</ul>
<p>Use this when:</p><ul>
<li>Preparing an arena for reuse.</li>
<li>Initializing a static or pre-allocated arena.</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">arena</td><td>Pointer to the <code><a class="el" href="structt__arena.html" title="The main memory arena structure used for fast allocation.">t_arena</a></code> structure to reset.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>This does <b>not</b> destroy any allocated memory. It should typically be called before initializing the arena with a new or reused buffer.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__arena__internal.html#ga158f6a0623850d3dc681d9ecab1fe27f" title="Reset all allocation statistics in an arena stats structure.">arena_stats_reset</a> </dd>
<dd>
<a class="el" href="arena_8h.html#a4a0d8e453e26366da91c18877495ad42">arena_init_with_buffer</a> </dd></dl>
<dl class="section examples"><dt>Examples</dt><dd><a class="el" href="_2home_2toonsa_2myProjects_2memoryArena_2srcs_2core_2arena_cleanup_8c-example.html#a8">/home/toonsa/myProjects/memoryArena/srcs/core/arena_cleanup.c</a>.</dd>
</dl>
<div class="fragment"><div class="line"><span class="lineno">  242</span>{</div>
<div class="line"><span class="lineno">  243</span>    arena-&gt;buffer = NULL;</div>
<div class="line"><span class="lineno">  244</span>    arena-&gt;size   = 0;</div>
<div class="line"><span class="lineno">  245</span>    arena-&gt;offset = 0;</div>
<div class="line"><span class="lineno">  246</span> </div>
<div class="line"><span class="lineno">  247</span>    atomic_store_explicit(&amp;arena-&gt;owns_buffer, <span class="keyword">false</span>, memory_order_release);</div>
<div class="line"><span class="lineno">  248</span>    atomic_store_explicit(&amp;arena-&gt;can_grow, <span class="keyword">false</span>, memory_order_release);</div>
<div class="line"><span class="lineno">  249</span> </div>
<div class="line"><span class="lineno">  250</span>    arena-&gt;grow_cb    = NULL;</div>
<div class="line"><span class="lineno">  251</span>    arena-&gt;parent_ref = NULL;</div>
<div class="line"><span class="lineno">  252</span> </div>
<div class="line"><span class="lineno">  253</span>    <a class="code hl_function" href="group__arena__internal.html#ga158f6a0623850d3dc681d9ecab1fe27f">arena_stats_reset</a>(&amp;arena-&gt;stats);</div>
<div class="line"><span class="lineno">  254</span> </div>
<div class="line"><span class="lineno">  255</span>    memset(arena-&gt;debug.id, 0, <a class="code hl_define" href="arena__config_8h.html#a5489ebed19870e9f0cdbe626a20521e9">ARENA_ID_LEN</a>);</div>
<div class="line"><span class="lineno">  256</span>    arena-&gt;debug.label            = NULL;</div>
<div class="line"><span class="lineno">  257</span>    arena-&gt;debug.error_cb         = NULL;</div>
<div class="line"><span class="lineno">  258</span>    arena-&gt;debug.error_context    = NULL;</div>
<div class="line"><span class="lineno">  259</span>    arena-&gt;debug.subarena_counter = 0;</div>
<div class="line"><span class="lineno">  260</span> </div>
<div class="line"><span class="lineno">  261</span>    arena-&gt;hooks.hook_cb = NULL;</div>
<div class="line"><span class="lineno">  262</span>    arena-&gt;hooks.context = NULL;</div>
<div class="line"><span class="lineno">  263</span>}</div>
<div class="ttc" id="aarena__config_8h_html_a5489ebed19870e9f0cdbe626a20521e9"><div class="ttname"><a href="arena__config_8h.html#a5489ebed19870e9f0cdbe626a20521e9">ARENA_ID_LEN</a></div><div class="ttdeci">#define ARENA_ID_LEN</div><div class="ttdoc">Max characters for arena ID strings.</div><div class="ttdef"><b>Definition</b> arena_config.h:6</div></div>
<div class="ttc" id="agroup__arena__internal_html_ga158f6a0623850d3dc681d9ecab1fe27f"><div class="ttname"><a href="group__arena__internal.html#ga158f6a0623850d3dc681d9ecab1fe27f">arena_stats_reset</a></div><div class="ttdeci">void arena_stats_reset(t_arena_stats *stats)</div><div class="ttdoc">Reset all allocation statistics in an arena stats structure.</div><div class="ttdef"><b>Definition</b> arena_internal.c:187</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga627d4fdc46e225dccde0388ae40d04de" name="ga627d4fdc46e225dccde0388ae40d04de"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga627d4fdc46e225dccde0388ae40d04de">&#9670;&#160;</a></span>default_grow_cb()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t default_grow_cb </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>current_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>requested_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="arena__internal_8h.html">arena_internal.h</a>&gt;</code></p>

<p>Default growth policy callback for arena resizing. </p>
<p>Default growth strategy for arenas that support dynamic resizing.</p>
<p>Computes the next size for an arena that needs to grow. The result is typically a geometric increase (e.g., 2x rule), optionally adjusted to accommodate the requested size.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">current_size</td><td>The current buffer size of the arena. </td></tr>
    <tr><td class="paramname">requested_size</td><td>The size that triggered the growth. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A new size value suitable for reallocation.</dd></dl>
<p>This function computes a new arena size when a memory allocation request exceeds the current capacity. The growth strategy works as follows:</p>
<ul>
<li>If the current size is 0, it starts with a base size of 64 bytes.</li>
<li>It ensures no overflow occurs when adding <code>current_size + requested_size</code>.</li>
<li>It then doubles the size repeatedly until the new size is sufficient to satisfy the allocation.</li>
<li>If doubling is not enough (due to near <code>SIZE_MAX</code>), it falls back to a minimal sufficient size.</li>
</ul>
<p>This strategy offers exponential growth (geometric progression) to minimize reallocations and fragmentation.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">current_size</td><td>Current size of the arena in bytes. </td></tr>
    <tr><td class="paramname">requested_size</td><td>Additional memory needed for the new allocation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The new size in bytes, large enough to accommodate the request. Returns <code>SIZE_MAX</code> on overflow.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>You can override this behavior by assigning a custom function to <code>arena-&gt;grow_cb</code>. For example, use a fixed increment strategy instead of exponential growth if your use case favors more predictable memory sizing or tighter control over memory usage:</dd></dl>
<div class="fragment"><div class="line">arena-&gt;grow_cb = [](<span class="keywordtype">size_t</span> current, <span class="keywordtype">size_t</span> required) {</div>
<div class="line">    <span class="keywordflow">return</span> current + required + 128; <span class="comment">// Fixed buffer with 128-byte padding</span></div>
<div class="line">};</div>
</div><!-- fragment --><p>Reasons to use a custom strategy:</p><ul>
<li>You are working in a memory-constrained environment (e.g., embedded systems).</li>
<li>You want deterministic memory usage patterns.</li>
<li>You have prior knowledge of allocation patterns and want to tune growth granularity.</li>
</ul>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="arena_8h.html#a223081ace38b33a46cc1ed0eaadf867f">arena_grow</a> </dd>
<dd>
<a class="el" href="arena_8h.html#a4a0d8e453e26366da91c18877495ad42">arena_init_with_buffer</a> </dd></dl>
<dl class="section examples"><dt>Examples</dt><dd><a class="el" href="_2home_2toonsa_2myProjects_2memoryArena_2srcs_2core_2arena_create_8c-example.html#a20">/home/toonsa/myProjects/memoryArena/srcs/core/arena_create.c</a>, and <a class="el" href="_2home_2toonsa_2myProjects_2memoryArena_2srcs_2core_2arena_resize_8c-example.html#a24">/home/toonsa/myProjects/memoryArena/srcs/core/arena_resize.c</a>.</dd>
</dl>
<div class="fragment"><div class="line"><span class="lineno">   79</span>{</div>
<div class="line"><span class="lineno">   80</span>    <span class="keywordtype">size_t</span> new_size = current_size &gt; 0 ? current_size : 64;</div>
<div class="line"><span class="lineno">   81</span> </div>
<div class="line"><span class="lineno">   82</span>    <span class="keywordflow">if</span> (requested_size &gt; SIZE_MAX - current_size)</div>
<div class="line"><span class="lineno">   83</span>        <span class="keywordflow">return</span> SIZE_MAX;</div>
<div class="line"><span class="lineno">   84</span> </div>
<div class="line"><span class="lineno">   85</span>    <span class="keyword">const</span> <span class="keywordtype">size_t</span> needed = current_size + requested_size;</div>
<div class="line"><span class="lineno">   86</span> </div>
<div class="line"><span class="lineno">   87</span>    <span class="keywordflow">while</span> (new_size &lt; needed &amp;&amp; new_size &lt;= SIZE_MAX / 2)</div>
<div class="line"><span class="lineno">   88</span>        new_size *= 2;</div>
<div class="line"><span class="lineno">   89</span> </div>
<div class="line"><span class="lineno">   90</span>    <span class="keywordflow">if</span> (new_size &lt; needed)</div>
<div class="line"><span class="lineno">   91</span>        new_size = needed;</div>
<div class="line"><span class="lineno">   92</span> </div>
<div class="line"><span class="lineno">   93</span>    <span class="keywordflow">return</span> new_size;</div>
<div class="line"><span class="lineno">   94</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ga81c528fdada659878311546faf6db2f7" name="ga81c528fdada659878311546faf6db2f7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga81c528fdada659878311546faf6db2f7">&#9670;&#160;</a></span>next_power_of_two()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static size_t next_power_of_two </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>x</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="arena__math_8h.html">arena_math.h</a>&gt;</code></p>

<p>Return the next power of two greater than or equal to <code>x</code>. </p>
<p>If <code>x</code> is already a power of two, it is returned unchanged. If <code>x</code> is zero, the function returns 1.</p>
<p>This is implemented using bitwise operations for speed and portability.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">x</td><td>The input value.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The next power of two ≥ <code>x</code>. </dd></dl>
<div class="fragment"><div class="line"><span class="lineno">  117</span>    {</div>
<div class="line"><span class="lineno">  118</span>        <span class="keywordflow">if</span> (x == 0)</div>
<div class="line"><span class="lineno">  119</span>            <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno">  120</span>        --x;</div>
<div class="line"><span class="lineno">  121</span>        x |= x &gt;&gt; 1;</div>
<div class="line"><span class="lineno">  122</span>        x |= x &gt;&gt; 2;</div>
<div class="line"><span class="lineno">  123</span>        x |= x &gt;&gt; 4;</div>
<div class="line"><span class="lineno">  124</span>        x |= x &gt;&gt; 8;</div>
<div class="line"><span class="lineno">  125</span>        x |= x &gt;&gt; 16;</div>
<div class="line"><span class="lineno">  126</span><span class="preprocessor">#if SIZE_MAX &gt; UINT32_MAX</span></div>
<div class="line"><span class="lineno">  127</span>        x |= x &gt;&gt; 32;</div>
<div class="line"><span class="lineno">  128</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  129</span>        <span class="keywordflow">return</span> x + 1;</div>
<div class="line"><span class="lineno">  130</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="ga23b2d670602172508845e71559ac6a01" name="ga23b2d670602172508845e71559ac6a01"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga23b2d670602172508845e71559ac6a01">&#9670;&#160;</a></span>would_overflow_mul()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool would_overflow_mul </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>b</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&#160;</td>
          <td class="paramname"><em>result</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="arena__math_8h.html">arena_math.h</a>&gt;</code></p>

<p>Perform a checked multiplication of two <code>size_t</code> values. </p>
<p>Computes <code>a * b</code> and stores the result in <code>*result</code>. If the multiplication would overflow <code>SIZE_MAX</code>, the function returns <code>true</code> and does not modify <code>*result</code>.</p>
<p>If the platform supports <code>__builtin_mul_overflow</code>, it will be used for fast hardware-checked overflow detection. Otherwise, a portable fallback is used.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">a</td><td>First operand. </td></tr>
    <tr><td class="paramname">b</td><td>Second operand. </td></tr>
    <tr><td class="paramname">result</td><td>Output pointer to store the product if safe.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>true</code> if the multiplication would overflow, <code>false</code> otherwise.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>This function ensures safe allocation size computations in arena logic. </dd></dl>
<dl class="section examples"><dt>Examples</dt><dd><a class="el" href="_2home_2toonsa_2myProjects_2memoryArena_2srcs_2core_2allocation_2arena_calloc_8c-example.html#a10">/home/toonsa/myProjects/memoryArena/srcs/core/allocation/arena_calloc.c</a>.</dd>
</dl>
<div class="fragment"><div class="line"><span class="lineno">   80</span>    {</div>
<div class="line"><span class="lineno">   81</span><span class="preprocessor">#if defined(__has_builtin)</span></div>
<div class="line"><span class="lineno">   82</span><span class="preprocessor">#if __has_builtin(__builtin_mul_overflow)</span></div>
<div class="line"><span class="lineno">   83</span>        <span class="keywordflow">return</span> __builtin_mul_overflow(a, b, result);</div>
<div class="line"><span class="lineno">   84</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">   85</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">   86</span> </div>
<div class="line"><span class="lineno">   87</span>        <span class="keywordflow">if</span> (a == 0 || b == 0)</div>
<div class="line"><span class="lineno">   88</span>        {</div>
<div class="line"><span class="lineno">   89</span>            *result = 0;</div>
<div class="line"><span class="lineno">   90</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">   91</span>        }</div>
<div class="line"><span class="lineno">   92</span>        <span class="keywordflow">if</span> (a &gt; SIZE_MAX / b)</div>
<div class="line"><span class="lineno">   93</span>        {</div>
<div class="line"><span class="lineno">   94</span>            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">   95</span>        }</div>
<div class="line"><span class="lineno">   96</span>        *result = a * b;</div>
<div class="line"><span class="lineno">   97</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">   98</span>    }</div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
